# è·¯ç”±æ¡ˆä¾‹è¯´æ˜

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº† `better-pages-create` çš„æ–‡ä»¶ç³»ç»Ÿè·¯ç”±åŠŸèƒ½ã€‚

## ğŸ”§ buildReactRoutePath å‡½æ•°åŠŸèƒ½

`buildReactRoutePath` å‡½æ•°ä½äº `src/utils.ts` ä¸­ï¼Œæ”¯æŒä»¥ä¸‹è·¯ç”±è§£æè§„åˆ™ï¼š

1. **è·¯ç”±ç»„** - `(fileName)` æˆ– `(fileName)_` â†’ ç§»é™¤æ‹¬å·éƒ¨åˆ†
2. **Splat è·¯ç”±** - `[...param]` â†’ `*`
3. **åŠ¨æ€å‚æ•°** - `[param]` â†’ `:param`
4. **å¯é€‰å‚æ•°** - `-[param]` â†’ `:param?`

## ğŸ“ æ–°å¢çš„è·¯ç”±ç¤ºä¾‹

### 1. è·¯ç”±ç»„ (Route Groups)

è·¯ç”±ç»„ä½¿ç”¨æ‹¬å·åŒ…å›´ï¼Œç”¨äºç»„ç»‡ç›¸å…³é¡µé¢ï¼Œä½†ä¸ä¼šå‡ºç°åœ¨æœ€ç»ˆçš„ URL ä¸­ã€‚

#### æ–‡ä»¶ç»“æ„ï¼š
```
src/pages/
â”œâ”€â”€ (auth)/
â”‚   â”œâ”€â”€ login.tsx      â†’ /login
â”‚   â””â”€â”€ register.tsx   â†’ /register
â””â”€â”€ (dashboard)/
    â””â”€â”€ stats.tsx      â†’ /stats
```

#### ç¤ºä¾‹é¡µé¢ï¼š
- **ç™»å½•é¡µé¢** (`/login`) - æ¥è‡ª `(auth)/login.tsx`
  - å®Œæ•´çš„ç™»å½•è¡¨å•
  - å±•ç¤ºè·¯ç”±ç»„åŠŸèƒ½è¯´æ˜
  - é“¾æ¥åˆ°æ³¨å†Œé¡µé¢

- **æ³¨å†Œé¡µé¢** (`/register`) - æ¥è‡ª `(auth)/register.tsx`
  - ç”¨æˆ·æ³¨å†Œè¡¨å•
  - è¡¨å•éªŒè¯ç¤ºä¾‹
  - é“¾æ¥åˆ°ç™»å½•é¡µé¢

- **ç»Ÿè®¡é¡µé¢** (`/stats`) - æ¥è‡ª `(dashboard)/stats.tsx`
  - æ•°æ®ç»Ÿè®¡å±•ç¤º
  - è·¯ç”±ç»„åŠŸèƒ½è¯¦ç»†è¯´æ˜
  - æ¨¡æ‹Ÿç»Ÿè®¡æ•°æ®

#### ä½¿ç”¨åœºæ™¯ï¼š
- ç»„ç»‡ç›¸å…³åŠŸèƒ½é¡µé¢ï¼ˆå¦‚è®¤è¯ç›¸å…³é¡µé¢ï¼‰
- å…±äº«å¸ƒå±€æˆ–æ ·å¼
- é€»è¾‘åˆ†ç»„ï¼Œä¾¿äºä»£ç ç®¡ç†

### 2. Splat è·¯ç”± (Catch-all Routes)

Splat è·¯ç”±ä½¿ç”¨ `[...param]` è¯­æ³•æ•è·è·¯å¾„ä¸­çš„æ‰€æœ‰å‰©ä½™æ®µã€‚

#### æ–‡ä»¶ç»“æ„ï¼š
```
src/pages/
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ [...path].tsx     â†’ /docs/*
â””â”€â”€ files/
    â””â”€â”€ [...segments].tsx â†’ /files/*
```

#### ç¤ºä¾‹é¡µé¢ï¼š
- **æ–‡ä»¶æµè§ˆå™¨** (`/files/*`) - æ¥è‡ª `files/[...segments].tsx`
  - æ¨¡æ‹Ÿæ–‡ä»¶ç³»ç»Ÿæµè§ˆ
  - é¢åŒ…å±‘å¯¼èˆª
  - è·¯å¾„æ®µè§£æå±•ç¤º
  - æ”¯æŒå¤šçº§ç›®å½•ç»“æ„

#### è·¯å¾„ç¤ºä¾‹ï¼š
- `/files/` â†’ segments = []
- `/files/documents` â†’ segments = ["documents"]
- `/files/images/2023/vacation` â†’ segments = ["images", "2023", "vacation"]

#### ä½¿ç”¨åœºæ™¯ï¼š
- æ–‡ä»¶æµè§ˆå™¨
- æ–‡æ¡£ç³»ç»Ÿçš„åµŒå¥—é¡µé¢
- å¤šçº§åˆ†ç±»é¡µé¢
- 404 é¡µé¢ï¼ˆæ•è·æ‰€æœ‰æœªåŒ¹é…è·¯å¾„ï¼‰

### 3. å¯é€‰å‚æ•° (Optional Parameters)

å¯é€‰å‚æ•°ä½¿ç”¨ `-[param]` è¯­æ³•åˆ›å»ºï¼Œè½¬æ¢ä¸º `:param?`ã€‚

#### æ–‡ä»¶ç»“æ„ï¼š
```
src/pages/
â”œâ”€â”€ shop/
â”‚   â””â”€â”€ -[category].tsx  â†’ /shop/:category?
â””â”€â”€ posts/
    â””â”€â”€ -[lang].tsx      â†’ /posts/:lang?
```

#### ç¤ºä¾‹é¡µé¢ï¼š

##### å•†åº—é¡µé¢ (`/shop/:category?`)
- **æ— å‚æ•°** (`/shop`) - æ˜¾ç¤ºæ‰€æœ‰å•†å“åˆ†ç±»
- **æœ‰å‚æ•°** (`/shop/electronics`) - æ˜¾ç¤ºç‰¹å®šåˆ†ç±»å•†å“
- æ”¯æŒçš„åˆ†ç±»ï¼šelectronics, clothing, books, home, sports
- åŠ¨æ€å•†å“å±•ç¤º
- åˆ†ç±»ç­›é€‰åŠŸèƒ½

##### å¤šè¯­è¨€åšå®¢ (`/posts/:lang?`)
- **é»˜è®¤è¯­è¨€** (`/posts`) - ä¸­æ–‡åšå®¢
- **æŒ‡å®šè¯­è¨€** (`/posts/en`) - è‹±æ–‡åšå®¢
- æ”¯æŒè¯­è¨€ï¼šzh (ä¸­æ–‡), en (English), ja (æ—¥æœ¬èª), ko (í•œêµ­ì–´)
- è¯­è¨€åˆ‡æ¢åŠŸèƒ½
- å¤šè¯­è¨€å†…å®¹å±•ç¤º

#### è·¯å¾„ç¤ºä¾‹ï¼š
```
å•†åº—é¡µé¢ï¼š
/shop â†’ category = undefined (æ˜¾ç¤ºæ‰€æœ‰åˆ†ç±»)
/shop/electronics â†’ category = "electronics"
/shop/clothing â†’ category = "clothing"

åšå®¢é¡µé¢ï¼š
/posts â†’ lang = undefined (é»˜è®¤ä¸­æ–‡)
/posts/en â†’ lang = "en"
/posts/ja â†’ lang = "ja"
```

#### ä½¿ç”¨åœºæ™¯ï¼š
- å•†å“åˆ†ç±»é¡µé¢ï¼ˆå¯æ˜¾ç¤ºæ‰€æœ‰åˆ†ç±»æˆ–ç‰¹å®šåˆ†ç±»ï¼‰
- å¤šè¯­è¨€æ”¯æŒï¼ˆå¯é€‰è¯­è¨€å‚æ•°ï¼‰
- åˆ†é¡µåŠŸèƒ½ï¼ˆå¯é€‰é¡µç å‚æ•°ï¼‰
- æœç´¢ç»“æœï¼ˆå¯é€‰æœç´¢å…³é”®è¯ï¼‰

## ğŸ¯ æŠ€æœ¯å®ç°è¦ç‚¹

### 1. è·¯ç”±ç»„å®ç°
```typescript
// æ­£åˆ™è¡¨è¾¾å¼ï¼š/^\([^)]+\)_?$/g
// åŒ¹é… (fileName) æˆ– (fileName)_ å¹¶æ›¿æ¢ä¸ºç©ºå­—ç¬¦ä¸²
export const GROUP_RE = [/^\([^)]+\)_?$/g, ''] as const
```

### 2. Splat è·¯ç”±å®ç°
```typescript
// æ­£åˆ™è¡¨è¾¾å¼ï¼š/\[\.{3}\w+\]/g
// åŒ¹é… [...param] å¹¶æ›¿æ¢ä¸º *
export const SPLAT_RE = [/\[\.{3}\w+\]/g, '*'] as const
```

### 3. åŠ¨æ€å‚æ•°å®ç°
```typescript
// æ­£åˆ™è¡¨è¾¾å¼ï¼š/\[([^\]]+)\]/g
// åŒ¹é… [param] å¹¶æ›¿æ¢ä¸º :param
export const PARAM_RE = [/\[([^\]]+)\]/g, ':$1'] as const
```

### 4. å¯é€‰å‚æ•°å®ç°
```typescript
// æ­£åˆ™è¡¨è¾¾å¼ï¼š/^-(:?[\w-]+|\*)/
// åŒ¹é… -[param] æˆ– -param å¹¶æ›¿æ¢ä¸º param? æˆ– :param?
export const OPTIONAL_RE = [/^-(:?[\w-]+|\*)/, '$1?'] as const
```

## ğŸš€ å¦‚ä½•æµ‹è¯•

1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š
```bash
cd examples/react
pnpm dev
```

2. è®¿é—®ç¤ºä¾‹é¡µé¢ï¼š
- é¦–é¡µï¼šhttp://localhost:3000
- è·¯ç”±ç»„ï¼šhttp://localhost:3000/login, http://localhost:3000/stats
- Splat è·¯ç”±ï¼šhttp://localhost:3000/files/documents/2023
- å¯é€‰å‚æ•°ï¼šhttp://localhost:3000/shop/electronics, http://localhost:3000/posts/en

3. æŸ¥çœ‹è·¯ç”±ç”Ÿæˆç»“æœï¼š
- è®¿é—® http://localhost:3000/debug æŸ¥çœ‹å®Œæ•´çš„è·¯ç”±ç»“æ„

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [React Router å®˜æ–¹æ–‡æ¡£](https://reactrouter.com/)
- [Vite æ’ä»¶å¼€å‘æŒ‡å—](https://vitejs.dev/guide/api-plugin.html)
- [æ–‡ä»¶ç³»ç»Ÿè·¯ç”±çº¦å®š](https://nextjs.org/docs/routing/introduction)

## ğŸ¤ è´¡çŒ®

å¦‚æœæ‚¨æœ‰æ›´å¥½çš„è·¯ç”±ç¤ºä¾‹æƒ³æ³•ï¼Œæ¬¢è¿æäº¤ PR æˆ– Issueï¼
